if ( ENABLE_SHARED )
    set(libbroker broker)
else ()
    set(libbroker brokerStatic)
endif ()

macro(unit_test name)
    add_executable(${name} ${name}.cc)
    target_link_libraries(${name} ${libbroker})
    add_test(NAME ${name} COMMAND ${name})
endmacro()

unit_test(test_printing)
unit_test(test_printing_remote)
unit_test(test_store_master)
unit_test(test_store_clone)
unit_test(test_store_frontend)
unit_test(test_store_remote)
unit_test(test_variant)
unit_test(test_optional)
unit_test(test_data)
